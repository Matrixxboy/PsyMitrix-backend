<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mental Health Report</title>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- html2pdf -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
  body {
    font-family: 'Helvetica', Arial, sans-serif;
    background-color: #f9f9f9;
    color: #333;
    margin: 0;
  }

  #downloadBtn {
    display: block;
    margin: 20px auto;
    padding: 12px 25px;
    font-size: 16px;
    cursor: pointer;
    border: none;
    border-radius: 8px;
    background: linear-gradient(90deg, #6a11cb, #2575fc);
    color: #fff;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  }

  #report {
    width: 794px; /* A4 width */
    margin: 0 auto;
    background: #fff;
    padding: 40px;
    box-sizing: border-box;
  }

  .pdf-page {
    page-break-after: always;
    position: relative;
    padding: 40px;
    box-sizing: border-box;
    min-height: 1050px; /* Enough for A4 height with footer */
  }

  h1 {
    text-align: center;
    font-size: 32px;
    margin-bottom: 5px;
  }

  h2 {
    color: #2c3e50;
    font-size: 24px;
    border-bottom: 2px solid #d1d1d1;
    padding-bottom: 6px;
    margin-bottom: 15px;
  }

  .section-card {
    background: #f2f6ff;
    border-left: 5px solid #6a11cb;
    padding: 12px 18px;
    margin-bottom: 12px;
    border-radius: 6px;
  }

  .section-card h3 {
    margin: 0 0 5px 0;
    color: #2575fc;
  }

  canvas {
    max-width: 100%;
    margin-top: 15px;
    background: #fff;
    padding: 10px;
    border-radius: 12px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
  }

  .footer {
    position: absolute;
    bottom: 20px;
    left: 40px;
    right: 40px;
    font-size: 12px;
    color: #555;
    display: flex;
    justify-content: space-between;
  }

  .fisrtPage{
    flex:auto;
    justify-content: center;
    align-content: center;
  }

</style>
</head>
<body>

<button id="downloadBtn">Download PDF</button>

<div id="report">
  <!-- Cover Page -->
  <div class="fisrtPage pdf-page  ">
    <h1>Utsav's Mental Health Report</h1>
    <p style="text-align:center; color:#555; font-size:16px;">Generated by PsyMitrix</p>
    <div class="footer">
      <span>www.psymitrix.com</span>
      <span>Page 1</span>
    </div>
  </div>

 <!-- Sections Page 1 -->
<div class="pdf-page" id="sections1">
  <h2>Report Overview</h2>
</div>

<!-- Sections Page 2 -->
<div class="pdf-page" id="sections2">
  <h2>Report Overview (Continued)</h2>
</div>


  <!-- Comparison Chart -->
  <div class="pdf-page">
    <h2>Comparison of Traits</h2>
    <canvas id="comparisonChart" height="200"></canvas>
    <div class="footer">
      <span>www.psymitrix.com</span>
      <span>Page 3</span>
    </div>
  </div>

  <!-- Radar Chart -->
  <div class="pdf-page">
    <h2>Radar Chart of Traits</h2>
    <canvas id="radarChart" height="200"></canvas>
    <div class="footer">
      <span>www.psymitrix.com</span>
      <span>Page 4</span>
    </div>
  </div>

  <!-- Career Fit -->
  <div class="pdf-page">
    <h2>Career Fit Recommendations</h2>
    <canvas id="careerChart" height="200"></canvas>
    <div class="footer">
      <span>www.psymitrix.com</span>
      <span>Page 5</span>
    </div>
  </div>
</div>

<script>
const reportData = {
        "sections": [
            {
                "title": "Openness",
                "text": "Utsav demonstrates high cognitive curiosity, consistently exploring new ideas and embracing diverse perspectives. He shows flexibility in thought, readily adapting concepts to fit novel contexts. Such a trait supports creative problem‑solving and continuous learning."
            },
            {
                "title": "Individualization",
                "text": "Self‑direction is evident in Utsav’s goal‑oriented approach and autonomous learning habits. He pursues personal achievements with confidence, valuing mastery and independence while maintaining a proactive stance toward challenges."
            },
            {
                "title": "Introversion–Extraversion",
                "text": "He tends toward an introverted orientation, favoring focused, reflective interactions over large group dynamics. Nevertheless, he engages comfortably in intimate settings and demonstrates effective communication when the context aligns with his comfort level."
            },
            {
                "title": "Self‑Esteem",
                "text": "Utsav maintains a stable sense of self‑worth, balancing self‑confidence with humility. His self‑evaluation aligns with adaptive resilience, allowing him to accept constructive feedback without undue self‑criticism."
            },
            {
                "title": "Enneagram & DISC Summary",
                "text": "An Enneagram type 3 profile indicates goal‑driven ambition coupled with a desire for authenticity. DISC analysis reflects a Dominant–Influence blend, suggesting a proactive yet persuasive interaction style that thrives in collaborative environments."
            },
            {
                "title": "FIRO‑B Summary",
                "text": "His interpersonal needs reveal a moderate demand for inclusion, a high need for influence, and a moderate desire for control. These dynamics drive his collaborative drive while balancing autonomy."
            },
            {
                "title": "Career Fit",
                "text": "Fields that leverage analytical thinking and creative output—such as software development, data analytics, product design, or strategic consulting—align with his openness and individualization strengths. Leadership roles in tech or entrepreneurship also suit his influence and goal‑oriented nature."
            },
            {
                "title": "Neuro Map",
                "text": "Openness – dorsolateral prefrontal cortex; Individualization – ventromedial prefrontal cortex; Introversion–Extraversion – amygdala and nucleus accumbens interplay; Self‑Esteem – medial prefrontal cortex; Enneagram/ DISC – anterior cingulate; FIRO‑B – anterior insula; Career Fit – dorsomedial prefrontal connectivity."
            }
        ],
        "charts_data": {
            "comparison_tables": [
                {
                    "trait": "Openness",
                    "Utsav": 4.5,
                    "average": 3.0
                },
                {
                    "trait": "Individualization",
                    "Utsav": 4.2,
                    "average": 3.1
                }
            ],
            "radar_chart": [
                {
                    "trait": "Openness",
                    "score": 4.5
                },
                {
                    "trait": "Individualization",
                    "score": 4.2
                },
                {
                    "trait": "Introversion",
                    "score": 3.8
                },
                {
                    "trait": "Self‑Esteem",
                    "score": 4.0
                },
                {
                    "trait": "Enneagram Type",
                    "score": 3
                },
                {
                    "trait": "DISC Dominance",
                    "score": 4.1
                },
                {
                    "trait": "DISC Influence",
                    "score": 4.3
                }
            ],
            "bar_chart": [
                {
                    "career": "Software Development",
                    "fit": 92
                },
                {
                    "career": "Data Analytics",
                    "fit": 88
                },
                {
                    "career": "Product Design",
                    "fit": 85
                },
                {
                    "career": "Consulting",
                    "fit": 80
                },
                {
                    "career": "Entrepreneurship",
                    "fit": 83
                }
            ]
        }
    };

const p_name = "Utsav";

// Populate sections as cards
const sections = reportData.sections;
const half = Math.ceil(sections.length / 2);

const sections1Div = document.getElementById("sections1");
const sections2Div = document.getElementById("sections2");

sections.slice(0, half).forEach(sec => {
  const div = document.createElement("div");
  div.className = "section-card";
  div.innerHTML = `<h3>${sec.title}</h3><p>${sec.text}</p>`;
  sections1Div.appendChild(div);
});
sections1Div.innerHTML += `<div class="footer"><span>www.psymitrix.com</span><span>Page 2</span></div>`;

sections.slice(half).forEach(sec => {
  const div = document.createElement("div");
  div.className = "section-card";
  div.innerHTML = `<h3>${sec.title}</h3><p>${sec.text}</p>`;
  sections2Div.appendChild(div);
});
sections2Div.innerHTML += `<div class="footer"><span>www.psymitrix.com</span><span>Page 3</span></div>`;

// Comparison Chart
new Chart(document.getElementById('comparisonChart').getContext('2d'), {
  type: 'bar',
  data: {
    labels: reportData.charts_data.comparison_tables.map(r => r.trait),
    datasets: [
      { label: p_name, data: reportData.charts_data.comparison_tables.map(r => r[p_name]), backgroundColor: 'rgba(102,126,234,0.7)', borderRadius:5 },
      { label: 'Average', data: reportData.charts_data.comparison_tables.map(r => r.average), backgroundColor: 'rgba(118,75,162,0.7)', borderRadius:5 }
    ]
  },
  options: { responsive:true, plugins:{legend:{position:'top'}}, scales:{y:{beginAtZero:true,max:5}} }
});

// Radar Chart
new Chart(document.getElementById('radarChart').getContext('2d'), {
  type: 'radar',
  data: {
    labels: reportData.charts_data.radar_chart.map(r => r.trait),
    datasets:[{
      label: p_name,
      data: reportData.charts_data.radar_chart.map(r => r.score),
      backgroundColor:'rgba(102,126,234,0.3)',
      borderColor:'rgba(102,126,234,1)',
      borderWidth:2,
      pointBackgroundColor:'rgba(102,126,234,1)'
    }]
  },
  options:{responsive:true, scales:{r:{beginAtZero:true,max:5}}}
});

// Career Fit Chart
new Chart(document.getElementById('careerChart').getContext('2d'), {
  type: 'bar',
  data:{
    labels: reportData.charts_data.bar_chart.map(r=>r.career),
    datasets:[{
      label:'Fit (%)',
      data: reportData.charts_data.bar_chart.map(r=>r.fit),
      backgroundColor:['rgba(102,126,234,0.7)','rgba(118,75,162,0.7)','rgba(255,159,64,0.7)','rgba(75,192,192,0.7)'],
      borderRadius:6
    }]
  },
  options:{responsive:true, plugins:{legend:{display:false}}, scales:{y:{beginAtZero:true,max:100}}}
});

// Download PDF
document.getElementById("downloadBtn").addEventListener("click",()=>{
  html2pdf().set({filename:`${p_name}_Mental_Health_Report.pdf`, html2canvas:{scale:2}}).from(document.getElementById("report")).save();
});
</script>

</body>
</html>
