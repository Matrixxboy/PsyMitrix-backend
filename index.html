<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mental Health Report</title>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- html2pdf -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');

  body {
    font-family: 'Montserrat', Arial, sans-serif;
    background-color: #f0f2f5;
    color: #333;
    margin: 0;
  }

  #downloadBtn {
    display: block;
    margin: 20px auto;
    padding: 12px 25px;
    font-size: 16px;
    cursor: pointer;
    border: none;
    border-radius: 8px;
    background: linear-gradient(90deg, #4a148c, #880e4f);
    color: #fff;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
  }

  #downloadBtn:hover {
    background: linear-gradient(90deg, #880e4f, #4a148c);
    box-shadow: 0 6px 12px rgba(0,0,0,0.3);
  }

  #report {
    width: 210mm; /* A4 width */
    margin: 0 auto;
    background: #fff;
    box-shadow: 0 0 20px rgba(0,0,0,0.1);
    background-image: url('https://www.transparenttextures.com/patterns/cubes.png');
  }

  .pdf-page {
    page-break-after: always;
    position: relative;
    padding: 25mm;
    box-sizing: border-box;
    height: 295mm; /* A4 height */
  }

  .landscape {
    width: 297mm;
    height: 210mm;
  }

  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    border-bottom: 5px solid;
    border-image-slice: 1;
    border-image-source: linear-gradient(to right, #4a148c, #880e4f);
    padding-bottom: 10px;
  }

  .header img {
    height: 50px;
  }

  h1 {
    text-align: center;
    font-size: 36px;
    margin-bottom: 10px;
    color: #4a148c;
  }

  h2 {
    color: #880e4f;
    font-size: 28px;
    padding-bottom: 10px;
    margin-bottom: 20px;
  }

  .section-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
  }

  .section-card {
    background: rgba(255, 255, 255, 0.8);
    border: 1px solid #eee;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  }

  .section-card h3 {
    margin: 0 0 10px 0;
    color: #4a148c;
    font-size: 20px;
  }

  .section-card i {
    margin-right: 10px;
    color: #880e4f;
  }

  canvas {
    max-width: 100%;
    margin-top: 20px;
    background: #fff;
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  }

  .radar-chart {
    width: 500px;
    height: 500px;
  }

  .footer {
    position: absolute;
    bottom: 25mm;
    left: 25mm;
    right: 25mm;
    font-size: 14px;
    color: #777;
    display: flex;
    justify-content: space-between;
    border-top: 5px solid;
    border-image-slice: 1;
    border-image-source: linear-gradient(to right, #4a148c, #880e4f);
    padding-top: 10px;
  }

  .fisrtPage{
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  .explanation {
    margin-top: 20px;
    font-size: 16px;
    color: #555;
    line-height: 1.6;
  }

  .toc {
    margin-top: 50px;
  }

  .toc ul {
    list-style: none;
    padding: 0;
  }

  .toc li {
    margin-bottom: 10px;
  }

  .toc a {
    text-decoration: none;
    color: #4a148c;
    font-size: 18px;
  }

  .summary {
    margin-top: 50px;
  }

</style>
</head>
<body>

<button id="downloadBtn">Download PDF</button>

<div id="report">
  <!-- Cover Page -->
  <div class="fisrtPage pdf-page">
    <div class="header">
      <img id="logo" src="https://www.endorphin.in/assets/images/WhatsApp%20Image%202024-02-19%20at%202.36.37%20PM.jpeg" alt="PsyMitrix Logo">
    </div>
    <h1 id="personName"></h1>
    <p style="text-align:center; color:#555; font-size:18px;">Generated by PsyMitrix</p>
    <div class="toc">
      <h2>Table of Contents</h2>
      <ul>
        <li><a href="#howToRead"><i class="fas fa-book-open"></i> How to Read This Report</a></li>
        <li><a href="#understandingResults"><i class="fas fa-chart-pie"></i> Understanding Your Results</a></li>
        <li><a href="#nextSteps"><i class="fas fa-shoe-prints"></i> Next Steps</a></li>
        <li><a href="#sections1"><i class="fas fa-file-alt"></i> Report Overview</a></li>
        <li><a href="#comparisonChart"><i class="fas fa-chart-bar"></i> Comparison of Traits</a></li>
        <li><a href="#radarChart"><i class="fas fa-compass"></i> Radar Chart of Traits</a></li>
        <li><a href="#careerChart"><i class="fas fa-briefcase"></i> Career Fit Recommendations</a></li>
      </ul>
    </div>
    <div class="footer">
      <span>www.psymitrix.com</span>
      <span class="page-number"></span>
    </div>
  </div>

  <!-- How to Read This Report -->
  <div class="pdf-page" id="howToRead">
    <div class="header">
      <img class="logo" src="https://www.endorphin.in/assets/images/WhatsApp%20Image%202024-02-19%20at%202.36.37%20PM.jpeg" alt="PsyMitrix Logo">
      <h2><i class="fas fa-book-open"></i> How to Read This Report</h2>
    </div>
    <div>
      <p>This report is designed to provide you with a comprehensive overview of your personality traits and how they may impact your life. The report is divided into several sections, each of which provides a different perspective on your personality.</p>
      <p>The first section of the report provides a summary of your key personality traits. This section is designed to give you a quick overview of your strengths and weaknesses.</p>
      <p>The second section of the report provides a more detailed look at your personality traits. This section is divided into several subsections, each of which focuses on a different aspect of your personality.</p>
      <p>The third section of the report provides a summary of your results in a graphical format. This section includes a radar chart, a bar chart, and a comparison table. These charts are designed to help you visualize your results and compare them to the average.</p>
      <p>The final section of the report provides some suggestions on what to do with the information in the report. This section includes a list of resources that you may find helpful.</p>
    </div>
    <div class="footer">
      <span>www.psymitrix.com</span>
      <span class="page-number"></span>
    </div>
  </div>

  <!-- Understanding Your Results -->
  <div class="pdf-page" id="understandingResults">
    <div class="header">
      <img class="logo" src="https://www.endorphin.in/assets/images/WhatsApp%20Image%202024-02-19%20at%202.36.37%20PM.jpeg" alt="PsyMitrix Logo">
      <h2><i class="fas fa-chart-pie"></i> Understanding Your Results</h2>
    </div>
    <div>
      <p>The results of this report are based on your responses to the personality assessment. The assessment is designed to measure a wide range of personality traits, including:</p>
      <ul>
        <li><strong>Openness:</strong> This trait reflects your willingness to try new things and your ability to think outside the box.</li>
        <li><strong>Conscientiousness:</strong> This trait reflects your ability to be organized, responsible, and dependable.</li>
        <li><strong>Extraversion:</strong> This trait reflects your tendency to be outgoing, sociable, and assertive.</li>
        <li><strong>Agreeableness:</strong> This trait reflects your tendency to be cooperative, compassionate, and trusting.</li>
        <li><strong>Neuroticism:</strong> This trait reflects your tendency to experience negative emotions, such as anxiety, depression, and anger.</li>
      </ul>
      <p>The report provides a score for each of these traits, as well as a summary of your overall personality profile. The scores are based on a scale of 0 to 100, with 50 being the average.</p>
      <p>It is important to remember that these results are not a definitive measure of your personality. They are simply a snapshot of your personality at a particular point in time. Your personality can change over time, and it is important to be aware of these changes.</p>
    </div>
    <div class="footer">
      <span>www.psymitrix.com</span>
      <span class="page-number"></span>
    </div>
  </div>

  <!-- Next Steps -->
  <div class="pdf-page" id="nextSteps">
    <div class="header">
      <img class="logo" src="https://www.endorphin.in/assets/images/WhatsApp%20Image%202024-02-19%20at%202.36.37%20PM.jpeg" alt="PsyMitrix Logo">
      <h2><i class="fas fa-shoe-prints"></i> Next Steps</h2>
    </div>
    <div>
      <p>Now that you have a better understanding of your personality, you can start to think about how you can use this information to improve your life. Here are a few suggestions:</p>
      <ul>
        <li><strong>Set goals that are aligned with your personality.</strong> If you are an extravert, you may want to set goals that involve socializing and interacting with others. If you are an introvert, you may want to set goals that involve working independently.</li>
        <li><strong>Develop strategies for coping with your weaknesses.</strong> If you are high in neuroticism, you may want to develop strategies for coping with stress and anxiety.</li>
        <li><strong>Seek out opportunities to use your strengths.</strong> If you are high in openness, you may want to seek out opportunities to travel and learn new things.</li>
        <li><strong>Talk to a therapist or counselor.</strong> A therapist or counselor can help you to better understand your personality and how it impacts your life. They can also help you to develop strategies for coping with your weaknesses and using your strengths.</li>
      </ul>
    </div>
    <div class="footer">
      <span>www.psymitrix.com</span>
      <span class="page-number"></span>
    </div>
  </div>

  <!-- Summary Page -->
  <div class="pdf-page">
    <div class="header">
      <img class="logo" src="https://www.endorphin.in/assets/images/WhatsApp%20Image%202024-02-19%20at%202.36.37%20PM.jpeg" alt="PsyMitrix Logo">
      <h2><i class="fas fa-file-alt"></i> Summary</h2>
    </div>
    <div class="summary" id="summary"></div>
    <div class="footer">
      <span>www.psymitrix.com</span>
      <span class="page-number"></span>
    </div>
  </div>

 <!-- Sections Page 1 -->
<div class="pdf-page" id="sections1">
  <div class="header">
    <img class="logo" src="" alt="PsyMitrix Logo">
    <h2><i class="fas fa-file-alt"></i> Report Overview</h2>
  </div>
  <div class="section-grid" id="sectionsGrid1"></div>
  <div class="footer">
    <span>www.psymitrix.com</span>
    <span class="page-number"></span>
  </div>
</div>

<!-- Sections Page 2 -->
<div class="pdf-page" id="sections2">
  <div class="header">
    <img class="logo" src="https://www.endorphin.in/assets/images/WhatsApp%20Image%202024-02-19%20at%202.36.37%20PM.jpeg" alt="PsyMitrix Logo">
    <h2><i class="fas fa-file-alt"></i> Report Overview (Continued)</h2>
  </div>
  <div class="section-grid" id="sectionsGrid2"></div>
  <div class="footer">
    <span>www.psymitrix.com</span>
    <span class="page-number"></span>
  </div>
</div>


  <!-- Comparison Chart -->
  <div class="pdf-page" id="comparisonChartPage">
    <div class="header">
      <img class="logo" src="https://www.endorphin.in/assets/images/WhatsApp%20Image%202024-02-19%20at%202.36.37%20PM.jpeg" alt="PsyMitrix Logo">
      <h2><i class="fas fa-chart-bar"></i> Comparison of Traits</h2>
    </div>
    <canvas id="comparisonChart" height="200"></canvas>
    <div class="explanation" id="comparisonChartExplanation"></div>
    <div class="footer">
      <span>www.psymitrix.com</span>
      <span class="page-number"></span>
    </div>
  </div>

  <!-- Radar Chart -->
  <div class="pdf-page " id="radarChartPage">
    <div class="header">
      <img class="logo" src="" alt="PsyMitrix Logo">
      <h2><i class="fas fa-compass"></i> Radar Chart of Traits</h2>
    </div>
    <canvas id="radarChart" class="radar-chart" height="200"></canvas>
    <div class="explanation" id="radarChartExplanation"></div>
    <div class="footer">
      <span>www.psymitrix.com</span>
      <span class="page-number"></span>
    </div>
  </div>

  <!-- Career Fit -->
  <div class="pdf-page" id="careerChartPage">
    <div class="header">
      <img class="logo" src="https://www.endorphin.in/assets/images/WhatsApp%20Image%202024-02-19%20at%202.36.37%20PM.jpeg" alt="PsyMitrix Logo">
      <h2><i class="fas fa-briefcase"></i> Career Fit Recommendations</h2>
    </div>
    <canvas id="careerChart" height="200"></canvas>
    <div class="explanation" id="careerChartExplanation"></div>
    <div class="footer">
      <span>www.psymitrix.com</span>
      <span class="page-number"></span>
    </div>
  </div>
</div>

<script>
const reportData = {
    "http_status": 200,
    "http_code": "OK",
    "message": "Report generated successfully",
    "data": {
        "sections": {
            "report": {
                "Openness": "Parth exhibits a balanced openness, showing curiosity about new experiences while maintaining a preference for familiar routines. He often engages in creative projects and enjoys exploring different music genres, but he also values stability in his daily schedule. This blend supports his adaptability without overwhelming him.",
                "Individualization": "Parth has a keen eye for individual differences, which he applies in social settings to tailor his interactions. He notices subtle cues in others’ moods and adapts his communication style accordingly. This sensitivity helps him build rapport with peers and mentors, fostering collaborative learning environments.",
                "Introversion–Extraversion": "Parth tends toward a quiet, introspective disposition, especially in unfamiliar groups. Yet he is capable of engaging energetically when addressing topics he is passionate about, such as technology or science. This flexible energy management allows him to contribute effectively in both small study groups and larger presentations.",
                "Self-Esteem": "Parth’s self‑esteem is stable, rooted in a sense of competence in academic tasks. He acknowledges his strengths in analytical thinking but remains open to constructive feedback. This balanced self‑view motivates him to pursue challenges while maintaining a realistic understanding of his growth areas.",
                "Enneagram & DISC Summary": "Enneagram 5w6 and DISC profile: Dominant (D) moderate, Influential (I) low, Steady (S) moderate, Conscientious (C) high. Parth values knowledge, is detail‑oriented, and prefers structured environments. He collaborates efficiently but may hesitate to initiate new projects unless the objectives are clearly defined.",
                "FIRO-B Summary": "Parth’s FIRO‑B results indicate moderate levels of inclusion (INCL), high control (CONT), and low affiliation (AFF). He seeks clear responsibilities and enjoys contributing to well‑structured tasks. He may feel less motivated in roles requiring frequent social interaction without defined objectives.",
                "Career Fit": "Given his analytical strengths, preference for structured settings, and ability to adapt his communication style, careers in data analysis, engineering, or research align well with Parth’s profile. Roles that blend independent work with collaborative problem‑solving will support his continued growth and satisfaction.",
                "Neuro Map": "Parth’s neuro‑profile highlights strong cognitive processing, moderate emotional regulation, and high attentional focus. These traits support learning in complex subjects, yet he benefits from strategies that reduce information overload, such as spaced repetition and visual organization tools."
            },
            "charts": {
                "radarChart": {
                    "data": [
                        {
                            "field": "Openness",
                            "value": "70"
                        },
                        {
                            "field": "Individualization",
                            "value": "80"
                        },
                        {
                            "field": "Introversion",
                            "value": "40"
                        },
                        {
                            "field": "Self‑Esteem",
                            "value": "75"
                        },
                        {
                            "field": "Enneagram",
                            "value": "65"
                        },
                        {
                            "field": "FIRO‑B",
                            "value": "60"
                        },
                        {
                            "field": "Career Fit",
                            "value": "85"
                        }
                    ],
                    "explanation": "The radar chart displays Parth’s profile across seven key domains. Higher values (closer to the outer edge) indicate stronger traits. Parth shows notable strengths in Individualization, Self‑Esteem, and Career Fit, while Introversion and FIRO‑B are comparatively moderate, reflecting a balanced yet focused skill set."
                },
                "barChart": {
                    "data": [
                        {
                            "field": "Analytical Skills",
                            "value": "90"
                        },
                        {
                            "field": "Creativity",
                            "value": "70"
                        },
                        {
                            "field": "Social Comfort",
                            "value": "55"
                        },
                        {
                            "field": "Goal‑Setting",
                            "value": "80"
                        },
                        {
                            "field": "Adaptability",
                            "value": "65"
                        }
                    ],
                    "explanation": "The bar chart compares Parth’s skill levels on five important dimensions. Analytical Skills and Goal‑Setting are exceptionally high, underscoring his academic drive. Creativity is strong but slightly lower than his analytical prowess. Social Comfort and Adaptability are moderate, suggesting areas where structured practice could enhance confidence."
                },
                "comparisonTable": {
                    "data": [
                        {
                            "field": "Openness",
                            "value": "70"
                        },
                        {
                            "field": "Individualization",
                            "value": "80"
                        },
                        {
                            "field": "Introversion",
                            "value": "40"
                        },
                        {
                            "field": "Self‑Esteem",
                            "value": "75"
                        },
                        {
                            "field": "Enneagram",
                            "value": "65"
                        },
                        {
                            "field": "FIRO‑B",
                            "value": "60"
                        },
                        {
                            "field": "Career Fit",
                            "value": "85"
                        }
                    ],
                    "explanation": "The comparison table contrasts Parth’s scores against the typical profile for his age group (18‑22 years). Parth consistently outperforms the average in Individualization, Self‑Esteem, Enneagram, FIRO‑B, and Career Fit, while his Introversion level is slightly lower, indicating a more balanced social engagement."
                }
            }
        }
    }
};

const p_name = "Parth";

function toDataURL(url, callback) {
  var xhr = new XMLHttpRequest();
  xhr.onload = function() {
    var reader = new FileReader();
    reader.onloadend = function() {
      callback(reader.result);
    }
    reader.readAsDataURL(xhr.response);
  };
  xhr.open('GET', url);
  xhr.responseType = 'blob';
  xhr.send();
}

toDataURL('https://www.psymitrix.com/assets/images/logo/psymitrix-logo.png', function(dataUrl) {
  const images = document.querySelectorAll('.logo');
  images.forEach(img => img.src = dataUrl);
  document.getElementById('logo').src = dataUrl;
});

document.getElementById("personName").innerHTML = `${p_name}'s Mental Health Report`;

// Populate summary
const summaryDiv = document.getElementById("summary");
summaryDiv.innerHTML = `<p>${reportData.data.sections.report.Openness}</p><p>${reportData.data.sections.report.Individualization}</p>`;

// Populate sections as cards
const sections = Object.entries(reportData.data.sections.report).map(([title, text]) => ({ title, text }));
const half = Math.ceil(sections.length / 2);

const sections1Div = document.getElementById("sectionsGrid1");
const sections2Div = document.getElementById("sectionsGrid2");

sections.slice(0, half).forEach(sec => {
  const div = document.createElement("div");
  div.className = "section-card";
  div.innerHTML = `<h3><i class="fas fa-check-circle"></i> ${sec.title}</h3><p>${sec.text}</p>`;
  sections1Div.appendChild(div);
});

sections.slice(half).forEach(sec => {
  const div = document.createElement("div");
  div.className = "section-card";
  div.innerHTML = `<h3><i class="fas fa-check-circle"></i> ${sec.title}</h3><p>${sec.text}</p>`;
  sections2Div.appendChild(div);
});

// Comparison Chart
new Chart(document.getElementById('comparisonChart').getContext('2d'), {
  type: 'bar',
  data: {
    labels: reportData.data.sections.charts.comparisonTable.data.map(r => r.field),
    datasets: [
      { label: p_name, data: reportData.data.sections.charts.comparisonTable.data.map(r => r.value), backgroundColor: 'rgba(74, 20, 140, 0.7)', borderRadius:5 },
    ]
  },
  options: { responsive:true, plugins:{legend:{position:'top'}}, scales:{y:{beginAtZero:true,max:100}} }
});

// Radar Chart
new Chart(document.getElementById('radarChart').getContext('2d'), {
  type: 'radar',
  data: {
    labels: reportData.data.sections.charts.radarChart.data.map(r => r.field),
    datasets:[{
      label: p_name,
      data: reportData.data.sections.charts.radarChart.data.map(r => r.value),
      backgroundColor:'rgba(74, 20, 140, 0.3)',
      borderColor:'rgba(74, 20, 140, 1)',
      borderWidth:2,
      pointBackgroundColor:'rgba(74, 20, 140, 1)'
    }]
  },
  options:{responsive:true, scales:{r:{beginAtZero:true,max:100}}}
});

// Career Fit Chart
new Chart(document.getElementById('careerChart').getContext('2d'), {
  type: 'bar',
  data:{
    labels: reportData.data.sections.charts.barChart.data.map(r=>r.field),
    datasets:[{
      label:'Fit (%)',
      data: reportData.data.sections.charts.barChart.data.map(r=>r.value),
      backgroundColor:['rgba(74, 20, 140, 0.7)','rgba(136, 14, 79, 0.7)','rgba(255, 159, 64, 0.7)','rgba(75, 192, 192, 0.7)'],
      borderRadius:6
    }]
  },
  options:{responsive:true, plugins:{legend:{display:false}}, scales:{y:{beginAtZero:true,max:100}}}
});

document.getElementById("comparisonChartExplanation").innerHTML = reportData.data.sections.charts.comparisonTable.explanation;
document.getElementById("radarChartExplanation").innerHTML = reportData.data.sections.charts.radarChart.explanation;
document.getElementById("careerChartExplanation").innerHTML = reportData.data.sections.charts.barChart.explanation;

// Download PDF
document.getElementById("downloadBtn").addEventListener("click",()=>{
  const report = document.getElementById("report");
  const downloadBtn = document.getElementById("downloadBtn");
  downloadBtn.style.display = "none";
  const opt = {
    margin:       0,
    filename:     `${p_name}_Mental_Health_Report.pdf`,
    image:        { type: 'jpeg', quality: 0.98 },
    html2canvas:  { scale: 2 },
    jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' }
  };
  html2pdf().from(report).set(opt).save().then(() => {
    downloadBtn.style.display = "block";
  });
});

const pages = document.querySelectorAll('.pdf-page');
for (let i = 0; i < pages.length; i++) {
  const pageNumber = pages[i].querySelector('.page-number');
  if (pageNumber) {
    pageNumber.textContent = `Page ${i + 1}`;
  }
}
</script>

</body>
</html>